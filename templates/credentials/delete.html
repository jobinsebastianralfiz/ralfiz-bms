{% extends 'base.html' %}
{% load static %}

{% block title %}Delete {{ credential.name }} - Ralfiz BMS{% endblock %}

{% block breadcrumb %}
<a href="{% url 'dashboard' %}" class="breadcrumb-item">Dashboard</a>
<span class="breadcrumb-separator">/</span>
<a href="{% url 'credential_list' %}" class="breadcrumb-item">Credentials</a>
<span class="breadcrumb-separator">/</span>
<a href="{% url 'credential_detail' credential.pk %}" class="breadcrumb-item">{{ credential.name }}</a>
<span class="breadcrumb-separator">/</span>
<span class="breadcrumb-item active">Delete</span>
{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-6 col-md-8 col-sm-12" style="padding: 0.75rem;">
    <div class="card">
      <div class="card-header" style="background: var(--danger-bg); border-bottom-color: #fecaca;">
        <div class="d-flex align-items-center gap-3">
          <div style="width: 48px; height: 48px; background: var(--danger); border-radius: var(--border-radius); display: flex; align-items: center; justify-content: center;">
            <i class="fas fa-exclamation-triangle text-white" style="font-size: 1.25rem;"></i>
          </div>
          <div>
            <h3 class="card-title mb-0" style="color: var(--danger);">Delete Credential</h3>
            <p class="text-sm mb-0" style="color: var(--danger);">This action cannot be undone</p>
          </div>
        </div>
      </div>
      <div class="card-body">
        <p class="text-secondary mb-4">
          Are you sure you want to delete the credential <strong>"{{ credential.name }}"</strong>?
        </p>

        <!-- Credential Summary -->
        <div class="p-3 rounded mb-4" style="background: var(--bg-body);">
          <div class="d-flex align-items-center gap-3 mb-3">
            <div style="width: 48px; height: 48px; background: var(--primary-bg); border-radius: var(--border-radius); display: flex; align-items: center; justify-content: center;">
              <i class="fas fa-key" style="color: var(--primary);"></i>
            </div>
            <div>
              <div class="fw-medium">{{ credential.name }}</div>
              <div class="text-sm text-muted">{{ credential.get_credential_type_display }} - {{ credential.provider }}</div>
            </div>
          </div>
          <div class="row">
            <div class="col-6">
              <div class="text-sm text-muted">Project</div>
              <div class="fw-medium">{{ credential.project.name }}</div>
            </div>
            <div class="col-6">
              <div class="text-sm text-muted">Expiry Date</div>
              <div class="fw-medium">{{ credential.expiry_date|date:"d M Y"|default:"Not set" }}</div>
            </div>
          </div>
        </div>

        <div class="alert alert-warning">
          <i class="fas fa-info-circle alert-icon"></i>
          <div class="alert-content">
            <div class="alert-title">Permanent deletion</div>
            <p class="alert-text mb-0">
              All credential data including username, password, and SSH keys will be permanently deleted.
            </p>
          </div>
        </div>

        <form method="post" class="d-flex gap-3 justify-content-end mt-4">
          {% csrf_token %}
          <a href="{% url 'credential_detail' credential.pk %}" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left"></i>
            Cancel
          </a>
          <button type="submit" class="btn btn-danger">
            <i class="fas fa-trash-alt"></i>
            Delete Credential
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
