{% extends 'base.html' %}
{% load static %}

{% block title %}{{ form_title }} - Ralfiz BMS{% endblock %}

{% block breadcrumb %}
<a href="{% url 'dashboard' %}" class="breadcrumb-item">Dashboard</a>
<span class="breadcrumb-separator">/</span>
<a href="{% url 'client_list' %}" class="breadcrumb-item">Clients</a>
<span class="breadcrumb-separator">/</span>
<span class="breadcrumb-item active">{{ form_title }}</span>
{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="page-header">
  <div>
    <h1 class="page-title">{{ form_title }}</h1>
    <p class="page-subtitle mb-0">{% if client %}Update client information{% else %}Create a new client record{% endif %}</p>
  </div>
</div>

<!-- Form Card -->
<form method="post">
  {% csrf_token %}
  <div class="row">
    <!-- Left Column -->
    <div class="col-8 col-md-12" style="padding: 0.75rem;">
      <!-- Basic Information -->
      <div class="card mb-4">
        <div class="card-header">
          <h3 class="card-title">
            <i class="fas fa-user me-2 text-primary"></i>
            Basic Information
          </h3>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-6 col-sm-12" style="padding: 0.5rem;">
              <div class="form-group">
                <label class="form-label" for="name">
                  Contact Name <span class="required">*</span>
                </label>
                <input type="text" class="form-control" id="name" name="name" placeholder="Enter contact person name" value="{{ client.name|default:'' }}" required>
              </div>
            </div>
            <div class="col-6 col-sm-12" style="padding: 0.5rem;">
              <div class="form-group">
                <label class="form-label" for="company_name">Company Name</label>
                <input type="text" class="form-control" id="company_name" name="company_name" placeholder="Enter company name" value="{{ client.company_name|default:'' }}">
              </div>
            </div>
            <div class="col-6 col-sm-12" style="padding: 0.5rem;">
              <div class="form-group">
                <label class="form-label" for="email">
                  Email Address <span class="required">*</span>
                </label>
                <input type="email" class="form-control" id="email" name="email" placeholder="Enter email address" value="{{ client.email|default:'' }}" required>
              </div>
            </div>
            <div class="col-6 col-sm-12" style="padding: 0.5rem;">
              <div class="form-group">
                <label class="form-label" for="phone">Phone Number</label>
                <input type="tel" class="form-control" id="phone" name="phone" placeholder="+91 98765 43210" value="{{ client.phone|default:'' }}">
              </div>
            </div>
            <div class="col-6 col-sm-12" style="padding: 0.5rem;">
              <div class="form-group">
                <label class="form-label" for="whatsapp">WhatsApp Number</label>
                <input type="tel" class="form-control" id="whatsapp" name="whatsapp" placeholder="+91 98765 43210" value="{{ client.whatsapp|default:'' }}">
              </div>
            </div>
            <div class="col-6 col-sm-12" style="padding: 0.5rem;">
              <div class="form-group">
                <label class="form-label" for="gst_number">GST Number</label>
                <input type="text" class="form-control" id="gst_number" name="gst_number" placeholder="e.g., 32ABCDE1234F1Z5" value="{{ client.gst_number|default:'' }}">
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Address -->
      <div class="card mb-4">
        <div class="card-header">
          <h3 class="card-title">
            <i class="fas fa-map-marker-alt me-2 text-primary"></i>
            Address
          </h3>
        </div>
        <div class="card-body">
          <div class="form-group">
            <label class="form-label" for="address">Full Address</label>
            <textarea class="form-control" id="address" name="address" rows="3" placeholder="Enter complete address">{{ client.address|default:'' }}</textarea>
          </div>
        </div>
      </div>

      <!-- Notes -->
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">
            <i class="fas fa-sticky-note me-2 text-primary"></i>
            Notes
          </h3>
        </div>
        <div class="card-body">
          <div class="form-group mb-0">
            <label class="form-label" for="notes">Internal Notes</label>
            <textarea class="form-control" id="notes" name="notes" rows="4" placeholder="Add any internal notes about this client...">{{ client.notes|default:'' }}</textarea>
            <div class="form-text">These notes are only visible to your team.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column -->
    <div class="col-4 col-md-12" style="padding: 0.75rem;">
      <!-- Settings -->
      <div class="card mb-4">
        <div class="card-header">
          <h3 class="card-title">
            <i class="fas fa-cog me-2 text-primary"></i>
            Settings
          </h3>
        </div>
        <div class="card-body">
          <div class="form-group">
            <label class="form-label" for="priority">Priority Level</label>
            <select class="form-control" id="priority" name="priority">
              <option value="medium" {% if client.priority == 'medium' or not client %}selected{% endif %}>Medium</option>
              <option value="high" {% if client.priority == 'high' %}selected{% endif %}>High</option>
              <option value="low" {% if client.priority == 'low' %}selected{% endif %}>Low</option>
            </select>
            <div class="form-text">Set priority for this client</div>
          </div>

          {% if client %}
          <div class="form-group mb-0">
            <label class="form-label">Status</label>
            <div class="form-check">
              <input type="checkbox" class="form-check-input" id="is_active" name="is_active" {% if client.is_active %}checked{% endif %}>
              <label class="form-check-label" for="is_active">Active Client</label>
            </div>
            <div class="form-text">Inactive clients won't appear in quick searches</div>
          </div>
          {% endif %}
        </div>
      </div>

      <!-- Quick Tips -->
      <div class="card" style="background: var(--primary-bg); border-color: var(--primary-lighter);">
        <div class="card-body">
          <h4 class="text-primary mb-3">
            <i class="fas fa-lightbulb me-2"></i>Quick Tips
          </h4>
          <ul class="text-sm text-secondary" style="padding-left: 1.25rem; margin: 0;">
            <li class="mb-2">Use the company name for invoicing</li>
            <li class="mb-2">Add GST number for tax calculations</li>
            <li class="mb-2">WhatsApp number enables quick messaging</li>
            <li>Notes help remember client preferences</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Form Actions -->
  <div class="card mt-4">
    <div class="card-body d-flex justify-content-between align-items-center">
      <a href="{% url 'client_list' %}" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-2"></i>
        Cancel
      </a>
      <button type="submit" class="btn btn-primary">
        <i class="fas fa-check me-2"></i>
        {% if client %}Update Client{% else %}Save Client{% endif %}
      </button>
    </div>
  </div>
</form>
{% endblock %}
