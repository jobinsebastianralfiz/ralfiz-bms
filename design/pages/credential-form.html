<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Credential - Ralfiz BMS</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
  <div class="app-wrapper">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <a href="../index.html" class="sidebar-logo">
          <div class="sidebar-logo-icon">R</div>
          <div class="sidebar-logo-text">Ralfiz<span>BMS</span></div>
        </a>
      </div>

      <nav class="sidebar-nav">
        <div class="nav-section">
          <a href="../index.html" class="nav-item">
            <i class="fas fa-th-large"></i>
            <span>Dashboard</span>
          </a>
        </div>

        <div class="nav-section">
          <div class="nav-section-title">Management</div>
          <a href="clients.html" class="nav-item">
            <i class="fas fa-users"></i>
            <span>Clients</span>
          </a>
          <a href="projects.html" class="nav-item">
            <i class="fas fa-folder-open"></i>
            <span>Projects</span>
          </a>
          <a href="credentials.html" class="nav-item active">
            <i class="fas fa-key"></i>
            <span>Credentials</span>
            <span class="nav-badge">3</span>
          </a>
        </div>

        <div class="nav-section">
          <div class="nav-section-title">Billing</div>
          <a href="quotes.html" class="nav-item">
            <i class="fas fa-file-alt"></i>
            <span>Quotes</span>
          </a>
          <a href="invoices.html" class="nav-item">
            <i class="fas fa-file-invoice-dollar"></i>
            <span>Invoices</span>
          </a>
          <a href="payments.html" class="nav-item">
            <i class="fas fa-credit-card"></i>
            <span>Payments</span>
          </a>
        </div>

        <div class="nav-section">
          <div class="nav-section-title">System</div>
          <a href="reports.html" class="nav-item">
            <i class="fas fa-chart-bar"></i>
            <span>Reports</span>
          </a>
          <a href="settings.html" class="nav-item">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
          </a>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Navbar -->
      <header class="navbar">
        <div class="navbar-left">
          <button class="sidebar-toggle" id="sidebarToggle">
            <i class="fas fa-bars"></i>
          </button>
          <div class="breadcrumb">
            <a href="../index.html" class="breadcrumb-item">Dashboard</a>
            <span class="breadcrumb-separator">/</span>
            <a href="credentials.html" class="breadcrumb-item">Credentials</a>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-item active">Add Credential</span>
          </div>
        </div>

        <div class="navbar-right">
          <div class="navbar-search">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Search clients, projects...">
          </div>

          <div class="navbar-actions">
            <button class="navbar-action-btn" title="Notifications">
              <i class="fas fa-bell"></i>
              <span class="badge">5</span>
            </button>
          </div>

          <div class="user-dropdown dropdown">
            <button class="user-dropdown-toggle" id="userDropdown">
              <div class="user-avatar">JD</div>
              <div class="user-info">
                <div class="user-name">John Doe</div>
                <div class="user-role">Administrator</div>
              </div>
              <i class="fas fa-chevron-down" style="color: var(--text-muted); font-size: 0.75rem;"></i>
            </button>
            <div class="dropdown-menu">
              <a href="#" class="dropdown-item">
                <i class="fas fa-user"></i>
                Profile
              </a>
              <a href="settings.html" class="dropdown-item">
                <i class="fas fa-cog"></i>
                Settings
              </a>
              <div class="dropdown-divider"></div>
              <a href="login.html" class="dropdown-item danger">
                <i class="fas fa-sign-out-alt"></i>
                Logout
              </a>
            </div>
          </div>
        </div>
      </header>

      <!-- Page Content -->
      <div class="content-wrapper">
        <!-- Page Header -->
        <div class="page-header">
          <div>
            <h1 class="page-title">Add New Credential</h1>
            <p class="page-subtitle mb-0">Store secure credentials for a project</p>
          </div>
        </div>

        <!-- Form Card -->
        <form id="credentialForm" onsubmit="return validateForm('credentialForm')">
          <div class="row">
            <!-- Left Column -->
            <div class="col-8 col-md-12" style="padding: 0.75rem;">
              <!-- Basic Information -->
              <div class="card mb-4">
                <div class="card-header">
                  <h3 class="card-title">
                    <i class="fas fa-key me-2 text-primary"></i>
                    Credential Details
                  </h3>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                      <div class="form-group">
                        <label class="form-label" for="name">
                          Credential Name <span class="required">*</span>
                        </label>
                        <input type="text" class="form-control" id="name" name="name" placeholder="e.g., Production Server, Domain Admin" required>
                      </div>
                    </div>
                    <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                      <div class="form-group">
                        <label class="form-label" for="project">
                          Project <span class="required">*</span>
                        </label>
                        <select class="form-control" id="project" name="project" required>
                          <option value="">Select a project</option>
                          <option value="1">E-commerce Platform - TechStart</option>
                          <option value="2">Mobile App - TechStart</option>
                          <option value="3">Inventory System - Green Earth</option>
                          <option value="4">Fashion Store - Fashion Hub</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                      <div class="form-group">
                        <label class="form-label" for="credential_type">
                          Credential Type <span class="required">*</span>
                        </label>
                        <select class="form-control" id="credential_type" name="credential_type" required onchange="updateFormFields()">
                          <option value="">Select type</option>
                          <option value="server">Server / SSH</option>
                          <option value="domain">Domain</option>
                          <option value="hosting">Hosting</option>
                          <option value="ssl">SSL Certificate</option>
                          <option value="database">Database</option>
                          <option value="email">Email Account</option>
                          <option value="api">API Key</option>
                          <option value="payment">Payment Gateway</option>
                          <option value="social">Social Media</option>
                          <option value="other">Other</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                      <div class="form-group">
                        <label class="form-label" for="provider">Provider / Service</label>
                        <input type="text" class="form-control" id="provider" name="provider" placeholder="e.g., AWS, GoDaddy, DigitalOcean">
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Dynamic Fields Card - Shows placeholder before type selection -->
              <div class="card mb-4" id="dynamicFieldsCard">
                <div class="card-header">
                  <h3 class="card-title" id="dynamicFieldsTitle">
                    <i class="fas fa-lock me-2 text-primary"></i>
                    <span id="dynamicTitleText">Credential Information</span>
                  </h3>
                </div>
                <div class="card-body" id="dynamicFieldsBody">
                  <!-- Placeholder - shown when no type is selected -->
                  <div id="placeholder-fields" class="text-center py-5">
                    <i class="fas fa-hand-pointer fa-3x text-muted mb-3" style="opacity: 0.5;"></i>
                    <p class="text-muted mb-0">Select a credential type above to see the relevant fields</p>
                  </div>

                  <!-- Server/SSH Fields -->
                  <div id="server-fields" class="credential-fields d-none">
                    <div class="row">
                      <div class="col-8 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Host / IP Address <span class="required">*</span></label>
                          <input type="text" class="form-control" name="server_host" placeholder="e.g., 192.168.1.1 or server.example.com">
                        </div>
                      </div>
                      <div class="col-4 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Port</label>
                          <input type="number" class="form-control" name="server_port" placeholder="22" value="22">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Username <span class="required">*</span></label>
                          <input type="text" class="form-control" name="server_username" placeholder="e.g., root, admin">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Password</label>
                          <div class="input-group">
                            <input type="password" class="form-control" id="server_password" name="server_password" placeholder="Enter password">
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('server_password')">
                              <i class="fas fa-eye" id="server_password-toggle-icon"></i>
                            </button>
                            <button type="button" class="btn btn-outline-secondary" onclick="generatePasswordFor('server_password')">
                              <i class="fas fa-random"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="col-12" style="padding: 0.5rem;">
                        <div class="form-group mb-0">
                          <label class="form-label">SSH Private Key</label>
                          <textarea class="form-control" name="server_ssh_key" rows="4" placeholder="Paste your private key here (optional)"></textarea>
                          <div class="form-text">Or use password authentication above</div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Domain Fields -->
                  <div id="domain-fields" class="credential-fields d-none">
                    <div class="row">
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Domain Name <span class="required">*</span></label>
                          <input type="text" class="form-control" name="domain_name" placeholder="e.g., example.com">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Registrar</label>
                          <input type="text" class="form-control" name="domain_registrar" placeholder="e.g., GoDaddy, Namecheap">
                        </div>
                      </div>
                      <div class="col-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Registrar Login URL</label>
                          <input type="url" class="form-control" name="domain_login_url" placeholder="e.g., https://account.godaddy.com">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Username / Email</label>
                          <input type="text" class="form-control" name="domain_username" placeholder="Login username or email">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Password</label>
                          <div class="input-group">
                            <input type="password" class="form-control" id="domain_password" name="domain_password" placeholder="Enter password">
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('domain_password')">
                              <i class="fas fa-eye" id="domain_password-toggle-icon"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Expiry Date <span class="required">*</span></label>
                          <input type="date" class="form-control" name="domain_expiry" required>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Auto Renew</label>
                          <select class="form-control" name="domain_auto_renew">
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                            <option value="unknown">Unknown</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-12" style="padding: 0.5rem;">
                        <div class="form-group mb-0">
                          <label class="form-label">Nameservers</label>
                          <textarea class="form-control" name="domain_nameservers" rows="2" placeholder="ns1.example.com&#10;ns2.example.com"></textarea>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Hosting Fields -->
                  <div id="hosting-fields" class="credential-fields d-none">
                    <div class="row">
                      <div class="col-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Control Panel URL <span class="required">*</span></label>
                          <input type="url" class="form-control" name="hosting_url" placeholder="e.g., https://cpanel.example.com or https://console.aws.com">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Username / Email <span class="required">*</span></label>
                          <input type="text" class="form-control" name="hosting_username" placeholder="Login username or email">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Password <span class="required">*</span></label>
                          <div class="input-group">
                            <input type="password" class="form-control" id="hosting_password" name="hosting_password" placeholder="Enter password">
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('hosting_password')">
                              <i class="fas fa-eye" id="hosting_password-toggle-icon"></i>
                            </button>
                            <button type="button" class="btn btn-outline-secondary" onclick="generatePasswordFor('hosting_password')">
                              <i class="fas fa-random"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Hosting Plan</label>
                          <input type="text" class="form-control" name="hosting_plan" placeholder="e.g., Business, Pro, Enterprise">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Renewal Date</label>
                          <input type="date" class="form-control" name="hosting_expiry">
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- SSL Certificate Fields -->
                  <div id="ssl-fields" class="credential-fields d-none">
                    <div class="row">
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Domain <span class="required">*</span></label>
                          <input type="text" class="form-control" name="ssl_domain" placeholder="e.g., example.com or *.example.com">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Certificate Authority</label>
                          <input type="text" class="form-control" name="ssl_issuer" placeholder="e.g., Let's Encrypt, DigiCert, Comodo">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Certificate Type</label>
                          <select class="form-control" name="ssl_type">
                            <option value="dv">Domain Validated (DV)</option>
                            <option value="ov">Organization Validated (OV)</option>
                            <option value="ev">Extended Validation (EV)</option>
                            <option value="wildcard">Wildcard</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Expiry Date <span class="required">*</span></label>
                          <input type="date" class="form-control" name="ssl_expiry" required>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Auto Renew</label>
                          <select class="form-control" name="ssl_auto_renew">
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Installation Location</label>
                          <input type="text" class="form-control" name="ssl_location" placeholder="e.g., Cloudflare, Server, Load Balancer">
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Database Fields -->
                  <div id="database-fields" class="credential-fields d-none">
                    <div class="row">
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Database Type <span class="required">*</span></label>
                          <select class="form-control" name="db_type">
                            <option value="mysql">MySQL</option>
                            <option value="postgresql">PostgreSQL</option>
                            <option value="mongodb">MongoDB</option>
                            <option value="mariadb">MariaDB</option>
                            <option value="sqlite">SQLite</option>
                            <option value="redis">Redis</option>
                            <option value="other">Other</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Database Name <span class="required">*</span></label>
                          <input type="text" class="form-control" name="db_name" placeholder="e.g., myapp_production">
                        </div>
                      </div>
                      <div class="col-8 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Host <span class="required">*</span></label>
                          <input type="text" class="form-control" name="db_host" placeholder="e.g., localhost or db.example.com">
                        </div>
                      </div>
                      <div class="col-4 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Port</label>
                          <input type="number" class="form-control" name="db_port" placeholder="3306">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Username <span class="required">*</span></label>
                          <input type="text" class="form-control" name="db_username" placeholder="Database username">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Password <span class="required">*</span></label>
                          <div class="input-group">
                            <input type="password" class="form-control" id="db_password" name="db_password" placeholder="Enter password">
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('db_password')">
                              <i class="fas fa-eye" id="db_password-toggle-icon"></i>
                            </button>
                            <button type="button" class="btn btn-outline-secondary" onclick="generatePasswordFor('db_password')">
                              <i class="fas fa-random"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Email Account Fields -->
                  <div id="email-fields" class="credential-fields d-none">
                    <div class="row">
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Email Address <span class="required">*</span></label>
                          <input type="email" class="form-control" name="email_address" placeholder="e.g., admin@example.com">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Password <span class="required">*</span></label>
                          <div class="input-group">
                            <input type="password" class="form-control" id="email_password" name="email_password" placeholder="Enter password">
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('email_password')">
                              <i class="fas fa-eye" id="email_password-toggle-icon"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="col-8 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">IMAP Server</label>
                          <input type="text" class="form-control" name="email_imap" placeholder="e.g., imap.gmail.com">
                        </div>
                      </div>
                      <div class="col-4 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">IMAP Port</label>
                          <input type="number" class="form-control" name="email_imap_port" placeholder="993">
                        </div>
                      </div>
                      <div class="col-8 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">SMTP Server</label>
                          <input type="text" class="form-control" name="email_smtp" placeholder="e.g., smtp.gmail.com">
                        </div>
                      </div>
                      <div class="col-4 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">SMTP Port</label>
                          <input type="number" class="form-control" name="email_smtp_port" placeholder="587">
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- API Key Fields -->
                  <div id="api-fields" class="credential-fields d-none">
                    <div class="row">
                      <div class="col-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">API Endpoint / Base URL</label>
                          <input type="url" class="form-control" name="api_endpoint" placeholder="e.g., https://api.example.com/v1">
                        </div>
                      </div>
                      <div class="col-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">API Key <span class="required">*</span></label>
                          <div class="input-group">
                            <input type="password" class="form-control" id="api_key" name="api_key" placeholder="Enter API key">
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('api_key')">
                              <i class="fas fa-eye" id="api_key-toggle-icon"></i>
                            </button>
                            <button type="button" class="btn btn-outline-secondary" onclick="copyField('api_key')">
                              <i class="fas fa-copy"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="col-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">API Secret / Secret Key</label>
                          <div class="input-group">
                            <input type="password" class="form-control" id="api_secret" name="api_secret" placeholder="Enter API secret (if applicable)">
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('api_secret')">
                              <i class="fas fa-eye" id="api_secret-toggle-icon"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Environment</label>
                          <select class="form-control" name="api_environment">
                            <option value="production">Production</option>
                            <option value="sandbox">Sandbox / Test</option>
                            <option value="development">Development</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Expiry Date</label>
                          <input type="date" class="form-control" name="api_expiry">
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Payment Gateway Fields -->
                  <div id="payment-fields" class="credential-fields d-none">
                    <div class="row">
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Gateway Provider <span class="required">*</span></label>
                          <select class="form-control" name="payment_provider">
                            <option value="">Select provider</option>
                            <option value="razorpay">Razorpay</option>
                            <option value="stripe">Stripe</option>
                            <option value="paypal">PayPal</option>
                            <option value="paytm">Paytm</option>
                            <option value="phonepe">PhonePe</option>
                            <option value="ccavenue">CCAvenue</option>
                            <option value="other">Other</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Merchant ID</label>
                          <input type="text" class="form-control" name="payment_merchant_id" placeholder="Merchant ID">
                        </div>
                      </div>
                      <div class="col-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Dashboard URL</label>
                          <input type="url" class="form-control" name="payment_dashboard_url" placeholder="e.g., https://dashboard.razorpay.com">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">API Key / Key ID <span class="required">*</span></label>
                          <div class="input-group">
                            <input type="password" class="form-control" id="payment_api_key" name="payment_api_key" placeholder="Enter API key">
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('payment_api_key')">
                              <i class="fas fa-eye" id="payment_api_key-toggle-icon"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Secret Key <span class="required">*</span></label>
                          <div class="input-group">
                            <input type="password" class="form-control" id="payment_secret_key" name="payment_secret_key" placeholder="Enter secret key">
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('payment_secret_key')">
                              <i class="fas fa-eye" id="payment_secret_key-toggle-icon"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Environment</label>
                          <select class="form-control" name="payment_environment">
                            <option value="live">Live / Production</option>
                            <option value="test">Test / Sandbox</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Webhook Secret</label>
                          <input type="text" class="form-control" name="payment_webhook_secret" placeholder="Webhook signing secret">
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Social Media Fields -->
                  <div id="social-fields" class="credential-fields d-none">
                    <div class="row">
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Platform <span class="required">*</span></label>
                          <select class="form-control" name="social_platform">
                            <option value="">Select platform</option>
                            <option value="facebook">Facebook</option>
                            <option value="instagram">Instagram</option>
                            <option value="twitter">Twitter / X</option>
                            <option value="linkedin">LinkedIn</option>
                            <option value="youtube">YouTube</option>
                            <option value="tiktok">TikTok</option>
                            <option value="pinterest">Pinterest</option>
                            <option value="other">Other</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Profile URL</label>
                          <input type="url" class="form-control" name="social_profile_url" placeholder="e.g., https://facebook.com/yourpage">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Username / Email <span class="required">*</span></label>
                          <input type="text" class="form-control" name="social_username" placeholder="Login email or username">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Password <span class="required">*</span></label>
                          <div class="input-group">
                            <input type="password" class="form-control" id="social_password" name="social_password" placeholder="Enter password">
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('social_password')">
                              <i class="fas fa-eye" id="social_password-toggle-icon"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="col-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">2FA Recovery Codes</label>
                          <textarea class="form-control" name="social_2fa_codes" rows="2" placeholder="Backup codes (one per line)"></textarea>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Other/Generic Fields -->
                  <div id="other-fields" class="credential-fields d-none">
                    <div class="row">
                      <div class="col-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">URL / Endpoint</label>
                          <input type="text" class="form-control" name="other_url" placeholder="Login URL or service endpoint">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Username / Identifier</label>
                          <input type="text" class="form-control" name="other_username" placeholder="Username, email, or identifier">
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Password / Secret</label>
                          <div class="input-group">
                            <input type="password" class="form-control" id="other_password" name="other_password" placeholder="Password or secret key">
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('other_password')">
                              <i class="fas fa-eye" id="other_password-toggle-icon"></i>
                            </button>
                            <button type="button" class="btn btn-outline-secondary" onclick="generatePasswordFor('other_password')">
                              <i class="fas fa-random"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="col-6 col-sm-12" style="padding: 0.5rem;">
                        <div class="form-group">
                          <label class="form-label">Expiry Date</label>
                          <input type="date" class="form-control" name="other_expiry">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Additional Information -->
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">
                    <i class="fas fa-sticky-note me-2 text-primary"></i>
                    Additional Information
                  </h3>
                </div>
                <div class="card-body">
                  <div class="form-group mb-0">
                    <label class="form-label" for="notes">Notes</label>
                    <textarea class="form-control" id="notes" name="notes" rows="4" placeholder="Add any additional notes, recovery keys, or special instructions..."></textarea>
                    <div class="form-text">Store recovery codes, 2FA backup, or special access instructions here.</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Right Column -->
            <div class="col-4 col-md-12" style="padding: 0.75rem;">
              <!-- Status -->
              <div class="card mb-4">
                <div class="card-header">
                  <h3 class="card-title">
                    <i class="fas fa-cog me-2 text-primary"></i>
                    Status
                  </h3>
                </div>
                <div class="card-body">
                  <div class="form-group mb-0">
                    <label class="form-label">Credential Status</label>
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" id="is_active" name="is_active" checked>
                      <label class="form-check-label" for="is_active">Active</label>
                    </div>
                    <div class="form-text">Inactive credentials won't trigger expiry alerts</div>
                  </div>
                </div>
              </div>

              <!-- Type-specific Tips -->
              <div class="card mb-4" id="typeTipsCard" style="background: var(--primary-bg); border-color: var(--primary-lighter);">
                <div class="card-body">
                  <h4 class="text-primary mb-3">
                    <i class="fas fa-lightbulb me-2"></i><span id="typeTipsTitle">Quick Tips</span>
                  </h4>
                  <ul class="text-sm text-secondary" style="padding-left: 1.25rem; margin: 0;" id="typeTipsList">
                    <li class="mb-2">Select a credential type to see relevant tips</li>
                    <li class="mb-2">All credentials are encrypted at rest</li>
                    <li class="mb-2">Set expiry dates for time-sensitive credentials</li>
                    <li>Use strong, unique passwords</li>
                  </ul>
                </div>
              </div>

              <!-- Security Notice -->
              <div class="card" style="background: var(--warning-light); border-color: var(--warning);">
                <div class="card-body">
                  <h4 class="text-warning mb-3">
                    <i class="fas fa-shield-alt me-2"></i>Security Notice
                  </h4>
                  <ul class="text-sm text-secondary" style="padding-left: 1.25rem; margin: 0;">
                    <li class="mb-2">Credentials are encrypted at rest</li>
                    <li class="mb-2">Access is logged for audit purposes</li>
                    <li class="mb-2">Use strong, unique passwords</li>
                    <li>Enable 2FA where possible</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="card mt-4">
            <div class="card-body d-flex justify-content-between align-items-center">
              <a href="credentials.html" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left me-2"></i>
                Cancel
              </a>
              <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary">
                  <i class="fas fa-check me-2"></i>
                  Save Credential
                </button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </main>
  </div>

  <script src="../js/app.js"></script>
  <script>
    // Field configuration for each credential type
    const fieldConfig = {
      server: {
        title: 'Server / SSH Details',
        icon: 'fa-server',
        tips: [
          'Store SSH keys securely in the notes section',
          'Default SSH port is 22',
          'Consider using key-based authentication',
          'Keep root credentials separately if needed'
        ]
      },
      domain: {
        title: 'Domain Registration Details',
        icon: 'fa-globe',
        tips: [
          'Set expiry date to receive renewal reminders',
          'Enable auto-renew to prevent expiration',
          'Store DNS records in notes if needed',
          'Keep registrar login secure with 2FA'
        ]
      },
      hosting: {
        title: 'Hosting Account Details',
        icon: 'fa-cloud',
        tips: [
          'Store control panel URL for quick access',
          'Set renewal date to track billing',
          'Note the hosting plan for reference',
          'Keep FTP/SFTP credentials in notes'
        ]
      },
      ssl: {
        title: 'SSL Certificate Details',
        icon: 'fa-lock',
        tips: [
          'Set expiry date for renewal reminders',
          "Let's Encrypt certs expire in 90 days",
          'Enable auto-renew if available',
          'Store certificate files securely'
        ]
      },
      database: {
        title: 'Database Connection Details',
        icon: 'fa-database',
        tips: [
          'Default ports: MySQL 3306, PostgreSQL 5432',
          'Never expose database to public internet',
          'Use strong passwords for DB accounts',
          'Store connection string in notes'
        ]
      },
      email: {
        title: 'Email Account Details',
        icon: 'fa-envelope',
        tips: [
          'Common IMAP port: 993 (SSL)',
          'Common SMTP port: 587 (TLS)',
          'Store app-specific passwords separately',
          'Enable 2FA on the email account'
        ]
      },
      api: {
        title: 'API Credentials',
        icon: 'fa-plug',
        tips: [
          'Never commit API keys to version control',
          'Use environment variables in production',
          'Rotate keys periodically for security',
          'Store sandbox and production keys separately'
        ]
      },
      payment: {
        title: 'Payment Gateway Credentials',
        icon: 'fa-credit-card',
        tips: [
          'Keep test and live keys separate',
          'Store webhook secrets securely',
          'Never log full card details',
          'Enable webhook signature verification'
        ]
      },
      social: {
        title: 'Social Media Account',
        icon: 'fa-share-alt',
        tips: [
          'Enable 2FA on all social accounts',
          'Store backup codes in notes',
          'Use unique passwords per platform',
          'Keep page admin access documented'
        ]
      },
      other: {
        title: 'Other Credentials',
        icon: 'fa-key',
        tips: [
          'Add descriptive notes for context',
          'Set expiry date if applicable',
          'Use strong, unique passwords',
          'Store 2FA codes in notes section'
        ]
      }
    };

    function updateFormFields() {
      const type = document.getElementById('credential_type').value;

      // Hide all field sections
      document.querySelectorAll('.credential-fields').forEach(el => {
        el.classList.add('d-none');
      });

      // Show placeholder if no type selected
      if (!type) {
        document.getElementById('placeholder-fields').classList.remove('d-none');
        document.getElementById('dynamicTitleText').textContent = 'Credential Information';
        updateTips(null);
        return;
      }

      // Hide placeholder
      document.getElementById('placeholder-fields').classList.add('d-none');

      // Show the relevant fields
      const fieldsEl = document.getElementById(type + '-fields');
      if (fieldsEl) {
        fieldsEl.classList.remove('d-none');
      }

      // Update title
      const config = fieldConfig[type];
      if (config) {
        document.getElementById('dynamicTitleText').textContent = config.title;
        updateTips(config);
      }
    }

    function updateTips(config) {
      const tipsList = document.getElementById('typeTipsList');
      const tipsTitle = document.getElementById('typeTipsTitle');

      if (!config) {
        tipsTitle.textContent = 'Quick Tips';
        tipsList.innerHTML = `
          <li class="mb-2">Select a credential type to see relevant tips</li>
          <li class="mb-2">All credentials are encrypted at rest</li>
          <li class="mb-2">Set expiry dates for time-sensitive credentials</li>
          <li>Use strong, unique passwords</li>
        `;
        return;
      }

      tipsTitle.textContent = config.title.replace(' Details', '') + ' Tips';
      tipsList.innerHTML = config.tips.map((tip, i) =>
        `<li class="${i < config.tips.length - 1 ? 'mb-2' : ''}">${tip}</li>`
      ).join('');
    }

    function togglePassword(fieldId) {
      const field = document.getElementById(fieldId);
      const icon = document.getElementById(fieldId + '-toggle-icon');
      if (field.type === 'password') {
        field.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
      } else {
        field.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
      }
    }

    function generatePasswordFor(fieldId) {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*';
      let password = '';
      for (let i = 0; i < 16; i++) {
        password += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      const field = document.getElementById(fieldId);
      field.value = password;
      field.type = 'text';
      const icon = document.getElementById(fieldId + '-toggle-icon');
      if (icon) {
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
      }
    }

    function copyField(fieldId) {
      const field = document.getElementById(fieldId);
      navigator.clipboard.writeText(field.value);
      // Show toast or feedback
      alert('Copied to clipboard!');
    }
  </script>
</body>
</html>
